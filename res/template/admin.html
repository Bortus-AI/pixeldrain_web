{{define "admin_panel"}}
<!DOCTYPE html>
<html lang="en">
	<head>
		{{template "meta_tags" "Administrator panel"}}
		{{template "user_style" .}}
	</head>
	<body>
		{{$isAdmin := .PixelAPI.UserIsAdmin}}
		{{template "page_top" .}}
		<div class="page_content">
			{{if $isAdmin}}
				<h3>Bandwidth and views</h3>
				<div class="highlight_dark">
					<button onclick="setData(7, 60);">Week</button>
					<button onclick="setData(14, 60);">Two Weeks</button>
					<button onclick="setData(21, 60);">Three Weeks</button>
					<button onclick="setData(30, 1440);">Month</button>
					<button onclick="setData(60, 1440);">Two Months</button>
					<button onclick="setData(91, 1440);">Quarter</button>
					<button onclick="setData(182, 1440);">Half-year</button>
					<button onclick="setData(356, 1440);">Year</button>
				</div>
				<div id="chart_container" class="chart-container" style="position: relative; width: 100%; height: 400px;">
					<canvas id="bandwidth_chart"></canvas>
				</div>
				<hr/>
				<div class="limit_width">
					<a href="/admin/globals">Update global settings</a>
					<h3>Database connection statistics</h3>
					<table>
						<thead>
							<tr>
								<td>Name</td>
								<td>Available</td>
								<td>Max</td>
								<td>Open</td>
								<td>In use</td>
								<td>Idle</td>
							</tr>
						</thead>
						<tbody id="tconnstat_body"></tbody>
					</table>
					<h3>Query statistics</h3>
					<table>
						<thead>
							<tr>
								<td style="cursor: pointer;" onclick="getStats('query_name')">Query</td>
								<td style="cursor: pointer;" onclick="getStats('calls')">Calls</td>
								<td style="cursor: pointer;" onclick="getStats('average_duration')">Average Duration</td>
								<td style="cursor: pointer;" onclick="getStats('total_duration')">Total Duration</td>
								<td>Callers</td>
							</tr>
						</thead>
						<tbody id="tstat_body"></tbody>
					</table>
				</div>
				<script src="/res/script/Chart.min.js"></script>
				<script>
					var apiEndpoint = '{{.APIEndpoint}}';
					{{template `util.js`}}
					{{template `admin.js`}}
				</script>
				{{else}}
				<h1 style="text-align: center;">;-)</h1>
				{{end}}
			</div>
			{{template "page_bottom" .}}
		</div>
	</body>
</html>
{{end}}
